<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" type = "image/vnd.microsoft.icon" href="../favicon.ico" />
      
    <title>秒転時計 | RAMUNE SPARK</title>
    <link rel = "stylesheet" href="../css/style.css">
    <link rel = "stylesheet" href="../css/styleOmake.css">
         
</head>
<body>


    <div id = "logo">
        <a href="../">
        <img src = "../img/logo.png">
        </a>
    </div>

    <div class = "blank"></div>
    <div class = "MainTitle"></div>

        <div class = pageTitle>
            秒転時計
        </div>

    </div>

    

    <div class = "blank2"></div>


    <noscript>
    <div class="container">

    <ul>
            <p>コンテンツのデータの取得に失敗しました。</p>
            <li>JavaScriptが無効になっている場合、コンテンツを正常に表示できません。</li>
            </ul>
        
        </div>
    </noscript>

        <div class="container" id="omakeBox" style="display:none">
            
        </div>

        <div class="container2" id="omakeBox2" style="display:none">
            
        </div>
            

                <div class="blank2"></div>

                <div id = top>
                    <a href="../">
                    [TOP]
                    </a>
                </div>


                <div class="blank2"></div>
                <div id = copyRight>
                    © RAMUNE SPARK
                </div>
                <div id = copyRight style="text-align: left;">
                    <a href="./">
                        おまけのぺえじに戻る
                    </a>
                    </div>
                    <div id = copyRight>
                    <a href="../support">
                    サポート
                    </a>
                </div>

                
<script src="js/function.js"></script>
<script>


    //const omakeBox = document.getElementById("omakeBox");



    const div_circle = createDiv("circle");
    omakeBox.appendChild(div_circle);

    div_circle.style.width = "80%";
    div_circle.style.maxWidth = "500px";
    div_circle.style.position = "relative";
    div_circle.style.margin = "auto";
    div_circle.style.aspectRatio = 1;
    div_circle.style.backgroundColor = "#FFFFFF";
    div_circle.style.borderRadius = "50%";
    div_circle.style.outline = "solid";
    div_circle.style.outlineColor = ramuneYellow;
    div_circle.style.outlineWidth = "0.125em";

    const div_circle2 = createDiv("circle2");
    div_circle.appendChild(div_circle2);

    div_circle2.style.width = "97%";
    div_circle2.style.position = "absolute";
    div_circle2.style.aspectRatio = 1;
    div_circle2.style.left = "50%";
    div_circle2.style.top = "50%";
    div_circle2.style.transform = "translate(-50%,-50%)";
    div_circle2.style.backgroundColor = "#FFFFFF";
    div_circle2.style.borderRadius = "50%";
    div_circle2.style.outline = "solid";
    div_circle2.style.outlineColor = ramuneBlue;
    div_circle2.style.outlineWidth = "0.125em";

    let div_number = [];

    for(let i = 1; i <= 12; i++){

        const r = (Math.PI*2*i/12)-Math.PI/2;
        const rot = (Math.PI*2*i/12);

        div_number[i] = createDiv("number"+i);
        div_circle2.appendChild(div_number[i]);
        div_number[i].style.position = "absolute";
        div_number[i].style.left = 50+43*Math.cos(r)+"%";
        div_number[i].style.top = 50+43*Math.sin(r)+"%";
        div_number[i].style.transform = "translate(-50%,-50%) rotate("+rot+"rad)";
        div_number[i].style.color = ramuneBlue;
        div_number[i].style.fontSize = "2em";

        div_number[i].innerHTML = i;




    }

    let div_m = [];

    for(let i = 0; i < 60; i++){

const r = (Math.PI*2*i/60)-Math.PI/2;
const rot = (Math.PI*2*i/60);

div_m[i] = createDiv("m"+i);
div_circle2.appendChild(div_m[i]);
div_m[i].style.position = "absolute";
div_m[i].style.width = "0.125%";

if(i%5 === 0){
    div_m[i].style.height = "0.7em";

}else{
    div_m[i].style.height = "0.35em";


}


div_m[i].style.left = 50+50*Math.cos(r)+"%";
div_m[i].style.top = 50+50*Math.sin(r)+"%";
div_m[i].style.transform = "translate(-50%,0%) rotate("+rot+"rad)";
div_m[i].style.transformOrigin = "center top";
div_m[i].style.backgroundColor = ramuneBlue;





}


    const div_second = createDiv("second");
    const div_secondX = createDiv("secondX");
    div_circle2.appendChild(div_second);
    div_second.appendChild(div_secondX);

    //秒針ベース
    div_second.style.width = "100%";
    div_second.style.height = "100%";
    div_second.style.position = "absolute";
    div_second.style.left = "50%";
    div_second.style.top = "50%";
    div_second.style.transform = "translate(-50%,-50%)";

    //秒針
    div_secondX.style.width = "0.0625%";
    div_secondX.style.height = "53%";
    div_secondX.style.position = "absolute";
    div_secondX.style.left = "50%";
    div_secondX.style.top = "55%";
    div_secondX.style.transform = "translate(-50%,-100%)";
    div_secondX.style.backgroundColor = ramuneBlue;

    const div_minute = createDiv("minute");
    const div_minuteX = createDiv("minuteX");
    div_circle2.appendChild(div_minute);
    div_minute.appendChild(div_minuteX);


    //分針ベース
    div_minute.style.width = "100%";
    div_minute.style.height = "100%";
    div_minute.style.position = "absolute";
    div_minute.style.left = "50%";
    div_minute.style.top = "50%";
    div_minute.style.transform = "translate(-50%,-50%)";

    //分針
    div_minuteX.style.width = "0.5%";
    div_minuteX.style.height = "47%";
    div_minuteX.style.position = "absolute";
    div_minuteX.style.left = "50%";
    div_minuteX.style.top = "53%";
    div_minuteX.style.transform = "translate(-50%,-100%)";
    div_minuteX.style.backgroundColor = ramuneBlue2;

    const div_hour = createDiv("hour");
    const div_hourX = createDiv("hourX");
    div_circle2.appendChild(div_hour);
    div_hour.appendChild(div_hourX);

    //時針ベース
    div_hour.style.width = "100%";
    div_hour.style.height = "100%";
    div_hour.style.position = "absolute";
    div_hour.style.left = "50%";
    div_hour.style.top = "50%";
    div_hour.style.transform = "translate(-50%,-50%)";

    //時針
    div_hourX.style.width = "1%";
    div_hourX.style.height = "35%";
    div_hourX.style.position = "absolute";
    div_hourX.style.left = "50%";
    div_hourX.style.top = "58%";
    div_hourX.style.transform = "translate(-50%,-100%)";
    div_hourX.style.backgroundColor = ramunePink;


    //中心
    const div_circle3 = createDiv("circle3");
    div_circle2.appendChild(div_circle3);

    div_circle3.style.width = "2%";
    div_circle3.style.position = "absolute";
    div_circle3.style.margin = "auto";
    div_circle3.style.aspectRatio = 1;
    div_circle3.style.left = "50%";
    div_circle3.style.top = "50%";
    div_circle3.style.transform = "translate(-50%,-50%)";
    div_circle3.style.backgroundColor = ramuneBlue;
    div_circle3.style.borderRadius = "50%";
    
let d;
let second;
let minute;
let hour;
let mSecond;

let clickClock = false;

let secondTurn = true;

let rotateClock = 0;

let changeTurnSpeed = Math.PI*2;

const speed = 1/8;

let change = 1;

setInterval(()=>{

    d = new Date();

    second = d.getSeconds();
    minute = d.getMinutes();
    hour = d.getHours();
    mSecond = d.getMilliseconds();


    if(change === 0 && rotateSecond() + rotateClock > changeTurnSpeed*48){

        changeTurnSpeed = Math.PI*2;        

    }

    
    if(secondTurn){
        rotateClock -= changeTurnSpeed;

        if(rotateClock <= -rotateSecond()){

            rotateClock = -rotateSecond();
            changeTurnSpeed = Math.PI*(speed)/48;
            change = 0;

        }

    }else{
        rotateClock += changeTurnSpeed;

        if(rotateClock >= 0){

            rotateClock = 0;
            changeTurnSpeed = Math.PI*(speed)/48;
            change = 0;

        }


    }
    


},1000/120)

//小数秒を得る
function secondF(){

    return (second + mSecond/1000);

}

//小数分を得る
function minuteF(){

return (minute + secondF()/60);

}

//小数時を得る
function hourF(){

return (hour + minuteF()/60);

}

function rotateSecond(){

    const p = Math.PI*2;

    let x;

    if(clickClock === false){
        x = secondF();
    }else{
        x = second;     
    }

    let a = x * p/60;
    return a;

}

function rotateMinute(){

const p = Math.PI*2;

let x;

if(clickClock === false){
        x = minuteF();
    }else{
        x = minute;     
    }

let a = x * p/60;
return a;

}

function rotateHour(){

const p = Math.PI*2;

let x;

x = hourF();

let a = x * p/12;
return a;

}



function display(){




    div_second.style.transform = "translate(-50%,-50%) rotate("+rotateSecond()+"rad)";
    div_minute.style.transform = "translate(-50%,-50%) rotate("+rotateMinute()+"rad)";
    div_hour.style.transform = "translate(-50%,-50%) rotate("+rotateHour()+"rad)";


        div_circle2.style.transform = "translate(-50%,-50%) rotate("+rotateClock+"rad)";



    window.requestAnimationFrame(display);

}



window.requestAnimationFrame(display);



/*ボタン作成*/

const div_buttonFrame = [];
const div_button = [];
const div_buttonTxtL = [];
const div_buttonTxtR = [];

const bt0 = ["なめらか","カクカク"];
const bt1 = ["OFF","ON"];

for(let i = 0; i < 2; i++){

    div_button[i] = createDiv("button"+i);
    div_buttonFrame[i] = createDiv("buttonFrame"+i);
    div_buttonFrame[i].className = "omakeButtonFrame";
    div_buttonTxtL[i] = createDiv("buttonTxtL"+i);
    div_buttonTxtR[i] = createDiv("buttonTxtR"+i);
    omakeBox.appendChild(div_buttonFrame[i]);
    div_buttonFrame[i].appendChild(div_button[i]);
    div_button[i].appendChild(div_buttonTxtL[i]);
    div_button[i].appendChild(div_buttonTxtR[i]);

    div_buttonFrame[i].style.width = "100%";
    div_buttonFrame[i].style.marginTop = "2em";
    div_buttonFrame[i].style.marginBottom = "2em";

    buttonSet(i)
}

    function buttonSet(e){


    div_button[e].style.margin = "3%";
    div_button[e].style.padding = "0.25em";
    div_button[e].style.width = "94%";
    div_button[e].style.display = "flex";
    div_button[e].style.backgroundColor = ramuneBlue2;
    div_button[e].style.borderRadius = "20px";
    div_button[e].style.justifyContent = "space-between";


    div_buttonTxtL[e].style.position = "relative";
    div_buttonTxtL[e].style.marginLeft = "1em";
    
    div_buttonTxtL[e].style.textAlign = "left";
    div_buttonTxtL[e].style.color = "#FFFFFF";
    div_buttonTxtL[e].style.fontSize = "1.5em";

    div_buttonTxtR[e].style.position = "relative";
    div_buttonTxtR[e].style.marginRight = "1em";

    div_buttonTxtR[e].style.textAlign = "right";
    div_buttonTxtR[e].style.color = "#FFFFFF";
    div_buttonTxtR[e].style.fontSize = "1.5em";
    
    }

    div_buttonTxtL[0].textContent = "動き";
    div_buttonTxtR[0].textContent = bt0[change_0or1(clickClock)];

    div_buttonTxtL[1].textContent = "秒転モード";
    div_buttonTxtR[1].textContent = bt1[change_0or1(secondTurn)];


    div_button[0].onmousedown = ()=>{

        event.preventDefault();

        clickClock = !clickClock;
        div_buttonTxtR[0].textContent = bt0[change_0or1(clickClock)];

    } 

    div_button[1].onmousedown = ()=>{

event.preventDefault();

secondTurn = !secondTurn;
div_buttonTxtR[1].textContent = bt1[change_0or1(secondTurn)];

changeTurnSpeed = Math.abs(rotateSecond())/48;
change = 1;

} 



 createManual("秒針を基準に時計の方が回転します。時刻を知る用途には向いていません。")


</script>


</body>
</html>
